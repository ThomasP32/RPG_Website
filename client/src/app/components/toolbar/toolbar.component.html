<div class="toolbar">
    <h2>Steam & Steel BattleGrounds</h2>
    <div class="scrollable-sections">
        <div class="toggle-section">
            <h3>Tuiles</h3>
            <button (click)="toggleTiles()">
                {{ isTilesVisible ? '-' : '+' }}
            </button>
        </div>
        <div class="tile-section" *ngIf="isTilesVisible">
            <div class="tile-grid">
                <div class="tile" [ngClass]="{ selected: selectedTile === 'door' }" (click)="selectTile('door')">
                    <img [src]="getTileImage('door')" alt="Door" />
                    <span class="description" draggable="false">Ceci est une porte solide, fermée. Cliquez pour l'ouvrir ou la fermer.</span>
                </div>
                <div class="tile" [ngClass]="{ selected: selectedTile === 'wall' }" (click)="selectTile('wall')">
                    <img [src]="getTileImage('wall')" alt="Wall" />
                    <span class="description" draggable="false"
                        >Un mur solide qui bloque les mouvements et la vision. Impossible de passer à travers.</span
                    >
                </div>
                <div class="tile" [ngClass]="{ selected: selectedTile === 'ice' }" (click)="selectTile('ice')">
                    <img [src]="getTileImage('ice')" alt="Ice" />
                    <span class="description" draggable="false"
                        >Glace glissante. Les joueurs qui marchent dessus peuvent glisser de manière incontrôlée.</span
                    >
                </div>
                <div class="tile" [ngClass]="{ selected: selectedTile === 'water' }" (click)="selectTile('water')">
                    <img [src]="getTileImage('water')" alt="Water" />
                    <span class="description" draggable="false">Eau profonde qui ralentit les mouvements et peut restreindre certaines actions.</span>
                </div>
            </div>
        </div>

        <div class="toggle-section">
            <h3>Objets</h3>
            <button (click)="toggleItems()">
                {{ isItemsVisible ? '-' : '+' }}
            </button>
        </div>
        <div class="item-section" *ngIf="isItemsVisible">
            <div class="item-grid">
                <div class="item" [class.disabled]="itemsUsable === false">
                    <img [src]="getItemImage('vest')" alt="Vest" draggable="false" (dragstart)="startDrag($event, 'vest')" />
                    <span class="description" draggable="false">Un gilet de protection qui augmente la défense contre les attaques.</span>
                </div>
                <div class="item" [class.disabled]="itemsUsable === false">
                    <img [src]="getItemImage('mask')" alt="Mask" draggable="false" (dragstart)="startDrag($event, 'mask')" />
                    <span class="description" draggable="false"
                        >Un masque mystérieux qui confère à son porteur une résistance accrue aux dangers environnementaux.</span
                    >
                </div>
                <div class="item" [class.disabled]="itemsUsable === false">
                    <img [src]="getItemImage('jar')" alt="Jar" draggable="false" (dragstart)="startDrag($event, 'jar')" />
                    <span class="description" draggable="false">Un pot mystique capable de contenir et de libérer des substances puissantes.</span>
                </div>
                <div class="item" [class.disabled]="itemsUsable === false">
                    <img [src]="getItemImage('acidgun')" alt="Acid gun" draggable="false" (dragstart)="startDrag($event, 'acidgun')" />
                    <span class="description" draggable="false"
                        >Une arme dangereuse qui tire des projectiles acides, infligeant des dégâts sur la durée.</span
                    >
                </div>
                <div class="item" [class.disabled]="itemsUsable === false">
                    <img [src]="getItemImage('key')" alt="Key" draggable="false" (dragstart)="startDrag($event, 'key')" />
                    <span class="description" draggable="false">Une clé qui déverrouille certaines portes ou coffres au trésor dans le jeu.</span>
                </div>
                <div class="item" [class.disabled]="itemsUsable === false">
                    <img [src]="getItemImage('hat')" alt="Hat" draggable="false" (dragstart)="startDrag($event, 'hat')" />
                    <span class="description" draggable="false">Un chapeau élégant qui offre de légers bonus à l'agilité et au charme.</span>
                </div>
                <div class="item" [class.disabled]="mapCounterService.randomItemCounter === 0 || itemsUsable === false">
                    <img [src]="getItemImage('random')" alt="Random item" draggable="false" (dragstart)="startDrag($event, 'random')" />
                    <span class="description">Une boîte mystère contenant un objet aléatoire. Ouvrez-la pour découvrir une surprise !</span>
                    <span class="counter" draggable="false">{{ mapCounterService.randomItemCounter }}</span>
                </div>
            </div>
        </div>

        <div class="toggle-section">
            <h3>Point de départ</h3>
            <button (click)="toggleStartingPoint()">
                {{ isStartingPointVisible ? '-' : '+' }}
            </button>
        </div>
        <div class="starting-point-section" *ngIf="isStartingPointVisible">
            <div class="tile" [class.disabled]="mapCounterService.startingPointCounter === 0">
                <img
                    [src]="getItemImage('starting-point')"
                    alt="point de départ"
                    [draggable]="mapCounterService.startingPointCounter > 0"
                    (dragstart)="startDrag($event, 'starting-point')"
                />
                <span class="description">Ceci est un point de départ où les joueurs commencent la partie.</span>
                <span class="counter" draggable="false">{{ mapCounterService.startingPointCounter }}</span>
            </div>
        </div>
        <div class="toggle-section" *ngIf="mode === 'ctf'">
            <h3>Drapeau</h3>
            <button (click)="toggleFlag()">
                {{ isFlagVisible ? '-' : '+' }}
            </button>
        </div>
        <div class="flag-section" *ngIf="isFlagVisible && mode === 'ctf'">
            <div class="item" (click)="selectItem('flag')" [class.disabled]="mapCounterService.flagCounter === 0">
                <img src="../../../../assets/items/flag.png" alt="drapeau" />
                <span class="description">Le drapeau en mode Capture du Drapeau. Capturez-le pour gagner la partie!</span>
                <span class="counter">{{ mapCounterService.flagCounter }}</span>
            </div>
        </div>
    </div>
</div>
