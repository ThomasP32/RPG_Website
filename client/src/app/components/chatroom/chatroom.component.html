<div
    class="chat-container"
    [class.retracted]="isChatRetracted"
    [class.waiting-room-chat]="isWaitingRoom"
    [class.game-page-chat]="isGamePage"
    [class.endgame-chat]="isEndGame"
>
    @if (isWaitingRoom) {
    <div class="chat-header" (click)="toggleChat()">
        <strong>Clavardage</strong>
        <span class="toggle-icon">
            <i [ngClass]="isChatRetracted ? 'fas fa-comments' : 'fas fa-comment-dots'"></i>
        </span>
    </div>
    } @if (!isChatRetracted) {
    <section class="chat-section">
        <strong class="player-name">{{ playerName }}</strong>
        <div id="messageArea" class="message-area">
            <ul id="messageList">
                @for (message of messages; track message) {
                <li>
                    @if (message.author) {
                    <div class="author">
                        <strong>{{ message.author }}</strong>
                    </div>
                    <div class="message">{{ message.text }}</div>
                    <div class="timestamp">
                        <span>{{ message.timestamp | date: 'HH:mm:ss' }}</span>
                    </div>
                    }
                </li>
                }
            </ul>
        </div>

        <div class="input-container">
            <input
                id="messageInput"
                placeholder="Votre message"
                [(ngModel)]="messageText"
                (keydown.enter)="sendMessage()"
                maxlength="200"
                type="text"
            />
            <div class="send-message-button" (click)="sendMessage()"><img src="assets/icons/arrow.png" alt="TrophÃ©e" class="icon" /></div>
        </div>
    </section>
    }
</div>
